<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WURS-25 성인 ADHD 자가 진단 / 成人ADHDセルフチェック</title>
    <style>
        :root {
            --primary-color: #4A90E2;
            --bg-color: #f4f6f9;
            --card-bg: #ffffff;
            --text-color: #333;
            --border-color: #e1e4e8;
            --error-color: #ff6b6b;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            position: relative;
        }

        /* 언어 전환 버튼 스타일 */
        .lang-switch {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-bottom: 20px;
        }

        .lang-btn {
            border: 1px solid var(--primary-color);
            background: white;
            color: var(--primary-color);
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            transition: all 0.2s;
        }

        .lang-btn.active {
            background: var(--primary-color);
            color: white;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8rem;
            word-break: keep-all;
        }

        .description {
            background-color: #eef7ff;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 40px;
            font-size: 0.95em;
            color: #4a6fa5;
            border-left: 5px solid var(--primary-color);
        }

        .question-item {
            margin-bottom: 30px;
            padding: 25px;
            border-radius: 12px;
            background-color: #fff;
            border: 1px solid var(--border-color);
            transition: all 0.2s;
        }
        
        .question-item.unanswered {
            border: 2px solid var(--error-color);
            background-color: #fff5f5;
        }

        .question-text {
            font-size: 1.1em;
            font-weight: 700;
            margin-bottom: 20px;
            display: block;
            color: #2d3748;
        }

        .options-container {
            display: flex;
            justify-content: space-between;
            gap: 8px;
        }

        .option-box {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            padding: 12px 5px;
            border-radius: 8px;
            transition: background 0.2s;
            border: 1px solid transparent;
        }

        .option-box:hover {
            background-color: #f7fafc;
        }

        .custom-circle {
            width: 24px;
            height: 24px;
            border: 2px solid #cbd5e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            background-color: white;
            pointer-events: none;
        }

        .custom-circle .inner-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background-color: var(--primary-color);
            transform: scale(0);
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .option-text {
            font-size: 0.85em;
            color: #718096;
            text-align: center;
            line-height: 1.3;
            pointer-events: none;
            word-break: keep-all;
        }

        .option-box.selected .custom-circle {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
        }

        .option-box.selected .custom-circle .inner-dot {
            transform: scale(1);
        }

        .option-box.selected .option-text {
            color: var(--primary-color);
            font-weight: bold;
        }

        @media (max-width: 600px) {
            .options-container {
                flex-direction: column;
                gap: 10px;
            }
            .option-box {
                flex-direction: row;
                justify-content: flex-start;
                padding: 15px;
                background-color: #f8f9fa;
                border: 1px solid #edf2f7;
            }
            .container {
                padding: 20px;
            }
        }

        .btn-submit {
            display: block;
            width: 100%;
            padding: 18px;
            background-color: var(--primary-color);
            color: white;
            font-size: 1.1em;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            margin-top: 40px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
            transition: transform 0.1s, background 0.2s;
        }

        .btn-submit:active {
            transform: scale(0.98);
        }

        .btn-submit:hover {
            background-color: #3a7bc8;
        }

        #result-area {
            display: none;
            margin-top: 40px;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-danger {
            background-color: #fff5f5;
            border: 2px solid #fc8181;
            color: #c53030;
        }

        .result-safe {
            background-color: #f0fff4;
            border: 2px solid #68d391;
            color: #276749;
        }
        
        .result-warning {
            background-color: #fffaf0;
            border: 2px solid #f6e05e;
            color: #b7791f;
        }

        .score-display {
            font-size: 2.5em;
            font-weight: 800;
            margin: 15px 0;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="lang-switch">
        <button class="lang-btn active" onclick="setLanguage('ko')">한국어</button>
        <button class="lang-btn" onclick="setLanguage('ja')">日本語</button>
    </div>

    <h1 id="title-text">WURS-25 어린 시절 회상</h1>
    
    <div class="description">
        <p id="desc-text-1"><strong>[지침]</strong> 이 검사는 현재가 아닌, <strong>초등학교 시절(만 7세~12세)의 내 모습</strong>을 회상하며 체크해주세요.</p>
        <p id="desc-text-2">※ 모든 문항에 답변해주셔야 정확한 결과를 볼 수 있습니다.<br>※ 선택한 항목을 한 번 더 누르면 체크가 해제됩니다.</p>
    </div>

    <form id="wurs-form">
        </form>

    <button type="button" class="btn-submit" id="submit-btn" onclick="checkAndCalculate()">결과 확인하기</button>

    <div id="result-area">
        </div>
</div>

<script>
    // 언어별 데이터
    const langData = {
        ko: {
            title: "WURS-25 어린 시절 회상",
            desc1: "<strong>[지침]</strong> 이 검사는 현재가 아닌, <strong>초등학교 시절(만 7세~12세)의 내 모습</strong>을 회상하며 체크해주세요.",
            desc2: "※ 모든 문항에 답변해주셔야 정확한 결과를 볼 수 있습니다.<br>※ 선택한 항목을 한 번 더 누르면 체크가 해제됩니다.",
            btn: "결과 확인하기",
            alertMsg: "모든 항목에 체크해야 결과를 볼 수 있습니다.\n(미응답 문항: {n}개)",
            scoreUnit: "점",
            options: [
                { label: "전혀 아니었다", score: 0 },
                { label: "약간 그랬다", score: 1 },
                { label: "보통이었다", score: 2 },
                { label: "꽤 그랬다", score: 3 },
                { label: "아주 많이 그랬다", score: 4 }
            ],
            questions: [
                "1. 집중력이 부족하고, 쉽게 산만해졌습니다.",
                "2. 걱정이 많고 자주 불안해했습니다.",
                "3. 신경이 예민하거나, 손발을 가만히 두지 못했습니다.",
                "4. 멍하니 있거나 공상에 잠길 때가 많았습니다.",
                "5. 성질이 급하고 욱하는 기질이 있었습니다.",
                "6. 화가 나면 분통을 터뜨리거나 심하게 떼를 썼습니다.",
                "7. 끈기가 부족해 시작한 일을 끝까지 마치지 못했습니다.",
                "8. 고집이 세고 자기주장이 강했습니다.",
                "9. 슬프거나 우울하고, 불행하다고 느꼈습니다.",
                "10. 부모님 말씀을 잘 안 듣거나 반항적이었습니다.",
                "11. 나 자신을 낮게 평가하거나 자존감이 낮았습니다.",
                "12. 별일 아닌 일에도 짜증을 잘 냈습니다.",
                "13. 기분 변화(감정 기복)가 심했습니다.",
                "14. 화를 자주 냈습니다.",
                "15. 생각보다 행동이 앞서고 충동적이었습니다.",
                "16. 또래 친구들에 비해 유치하거나 어리숙했습니다.",
                "17. 죄책감이나 후회를 자주 했습니다.",
                "18. 스스로 감정이나 행동을 조절하기 힘들었습니다.",
                "19. 비이성적으로 행동하거나 떼를 쓰는 경향이 있었습니다.",
                "20. 친구들에게 인기가 없거나, 친구 관계를 오래 유지하지 못했습니다.",
                "21. 다른 사람의 입장에서 생각하는 걸 어려워했습니다.",
                "22. 선생님께 꾸중을 듣거나 교무실에 자주 불려갔습니다.",
                "23. 전반적으로 공부를 못하거나 배우는 게 느렸습니다.",
                "24. 수학이나 숫자 계산을 특히 어려워했습니다.",
                "25. 내 머리나 능력에 비해 성적이 잘 안 나왔습니다."
            ],
            result: {
                highTitle: "⚠️ 성인 ADHD 가능성: 매우 높음",
                highDesc: "기준점(46점)을 초과하였습니다.<br><br>귀하의 점수는 어린 시절 ADHD 관련 기질이 뚜렷했음을 시사합니다.<br>어릴 때의 이런 특성이 성인기까지 지속되어 현재의 어려움을 유발하고 있을 가능성이 매우 높습니다.<br><br><strong>권장 사항:</strong> 이 결과를 캡처하여 정신건강의학과 전문의와 상담 시 제출하시면 진단에 큰 도움이 됩니다.",
                borderTitle: "⚠️ 성인 ADHD 가능성: 경계 구간",
                borderDesc: "기준점(46점)보다는 낮지만, 다수의 증상이 관찰됩니다.<br>현재 일상 생활에 불편함이 크다면 전문가의 도움을 받아보시는 것이 좋습니다.",
                lowTitle: "✅ 성인 ADHD 가능성: 낮음",
                lowDesc: "어린 시절의 ADHD 관련 증상이 기준치 이하입니다.<br>현재 겪고 계신 어려움은 ADHD보다는 스트레스, 불안, 환경적 요인 등 다른 원인일 가능성이 있습니다."
            }
        },
        ja: {
            title: "WURS-25 子供時代の回想",
            desc1: "<strong>[指針]</strong> この検査は現在ではなく、<strong>小学校時代（満7歳〜12歳）の自分の姿</strong>を思い出しながらチェックしてください。",
            desc2: "※ 正確な結果を得るため、すべての項目に回答してください。<br>※ 選択した項目をもう一度押すと選択が解除されます。",
            btn: "結果を確認する",
            alertMsg: "すべての項目にチェックしてください。\n(未回答項目: {n}個)",
            scoreUnit: "点",
            options: [
                { label: "全くなかった", score: 0 },
                { label: "少しあった", score: 1 },
                { label: "普通だった", score: 2 },
                { label: "結構あった", score: 3 },
                { label: "非常に頻繁にあった", score: 4 }
            ],
            questions: [
                "1. 集中力がなく、気が散りやすかった。",
                "2. 心配性で、不安を感じることが多かった。",
                "3. 神経質で、手足をそわそわ動かしていた。",
                "4. ぼんやりしたり、空想にふけることが多かった。",
                "5. 短気で、すぐにカッとなる気質だった。",
                "6. 怒ると癇癪（かんしゃく）を起こしたり、ひどく騒いだ。",
                "7. 根気がなく、始めたことを最後までやり遂げられなかった。",
                "8. 頑固で、自己主張が強かった。",
                "9. 悲しかったり、憂鬱で、不幸だと感じていた。",
                "10. 親の言うことを聞かず、反抗的だった。",
                "11. 自分を低く評価したり、自尊心が低かった。",
                "12. 些細なことでもすぐにイライラした。",
                "13. 気分屋で、感情の起伏が激しかった。",
                "14. すぐに腹を立てた。",
                "15. 考えずに行動したり、衝動的だった。",
                "16. 同年代の友達に比べて、幼かった。",
                "17. 罪悪感や後悔をよく感じていた。",
                "18. 感情や行動を自分でコントロールするのが難しかった。",
                "19. 理不尽な行動をとったり、わがままを言う傾向があった。",
                "20. 友達に人気がないか、友人関係が長く続かなかった。",
                "21. 他人の立場で物事を考えるのが苦手だった。",
                "22. 先生に叱られたり、職員室によく呼び出された。",
                "23. 全体的に勉強ができなかったり、覚えるのが遅かった。",
                "24. 算数や数字の計算が特に苦手だった。",
                "25. 頭の良さや能力の割に、成績が良くなかった。"
            ],
            result: {
                highTitle: "⚠️ 成人ADHDの可能性: 非常に高い",
                highDesc: "基準点(46点)を超過しました。<br><br>あなたの点数は、幼少期にADHD関連の気質が明確であったことを示唆しています。<br>幼少期のこのような特性が成人期まで持続し、現在の困難を引き起こしている可能性が非常に高いです。<br><br><strong>推奨事項:</strong> この結果を保存し、精神科専門医との相談時に提出すると診断の大きな助けになります。",
                borderTitle: "⚠️ 成人ADHDの可能性: 境界域",
                borderDesc: "基準点(46点)よりは低いですが、多数の症状が見られます。<br>現在、日常生活に支障が大きい場合は、専門家の助けを借りることをお勧めします。",
                lowTitle: "✅ 成人ADHDの可能性: 低い",
                lowDesc: "幼少期のADHD関連症状が基準値以下です。<br>現在抱えている困難は、ADHDよりもストレス、不安、環境的要因など他の原因である可能性があります。"
            }
        }
    };

    let currentLang = 'ko';
    const userAnswers = {}; // 선택값 유지

    // 언어 설정 함수
    function setLanguage(lang) {
        currentLang = lang;
        
        // 버튼 스타일 업데이트
        document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelector(`.lang-btn[onclick="setLanguage('${lang}')"]`).classList.add('active');

        // 정적 텍스트 업데이트
        document.getElementById('title-text').innerText = langData[lang].title;
        document.getElementById('desc-text-1').innerHTML = langData[lang].desc1;
        document.getElementById('desc-text-2').innerHTML = langData[lang].desc2;
        document.getElementById('submit-btn').innerText = langData[lang].btn;

        // 질문 폼 다시 렌더링 (기존 답변 유지)
        renderForm();
        
        // 결과창이 열려있다면 결과창도 언어 업데이트
        const resultArea = document.getElementById('result-area');
        if (resultArea.style.display === 'block') {
            checkAndCalculate();
        }
    }

    // 폼 렌더링
    function renderForm() {
        const formContainer = document.getElementById('wurs-form');
        const data = langData[currentLang];
        
        formContainer.innerHTML = ''; // 초기화

        data.questions.forEach((q, index) => {
            const qDiv = document.createElement('div');
            qDiv.className = 'question-item';
            qDiv.id = `q-row-${index}`;

            // 답변 상태에 따른 스타일 (미응답 테두리 등)
            // 렌더링 시에는 초기화되므로 checkAndCalculate에서 처리된 클래스는 사라짐.
            // 필요하다면 여기서 userAnswers[index]가 undefined인 경우 처리 가능하나, 
            // UX상 제출 버튼 눌렀을 때만 빨간불 들어오는게 나음.

            let html = `<span class="question-text">${q}</span>`;
            html += `<div class="options-container">`;

            data.options.forEach((opt, optIndex) => {
                const isSelected = userAnswers[index] === opt.score ? 'selected' : '';
                
                html += `
                    <div class="option-box ${isSelected}" id="opt-box-${index}-${opt.score}" onclick="handleClick(${index}, ${opt.score})">
                        <div class="custom-circle"><div class="inner-dot"></div></div>
                        <span class="option-text">${opt.label}<br><span style="font-size:0.8em; opacity:0.6">(${opt.score}${data.scoreUnit})</span></span>
                    </div>
                `;
            });
            html += `</div>`;
            qDiv.innerHTML = html;
            formContainer.appendChild(qDiv);
        });
    }

    // 클릭 핸들러
    window.handleClick = function(qIndex, score) {
        if (userAnswers[qIndex] === score) {
            delete userAnswers[qIndex]; // 토글 해제
            updateVisualState(qIndex, null);
        } else {
            userAnswers[qIndex] = score; // 선택
            updateVisualState(qIndex, score);
        }
    };

    function updateVisualState(qIndex, selectedScore) {
        const data = langData[currentLang];
        // 모든 옵션 선택 해제
        data.options.forEach(opt => {
            const box = document.getElementById(`opt-box-${qIndex}-${opt.score}`);
            if(box) box.classList.remove('selected');
        });

        if (selectedScore !== null) {
            const selectedBox = document.getElementById(`opt-box-${qIndex}-${selectedScore}`);
            if(selectedBox) selectedBox.classList.add('selected');
            document.getElementById(`q-row-${qIndex}`).classList.remove('unanswered');
        }
    }

    // 결과 계산
    window.checkAndCalculate = function() {
        const data = langData[currentLang];
        let totalScore = 0;
        let unansweredList = [];
        const totalQuestions = 25;

        for (let i = 0; i < totalQuestions; i++) {
            if (userAnswers[i] === undefined) {
                unansweredList.push(i);
                document.getElementById(`q-row-${i}`).classList.add('unanswered');
            } else {
                totalScore += userAnswers[i];
                document.getElementById(`q-row-${i}`).classList.remove('unanswered');
            }
        }

        if (unansweredList.length > 0) {
            alert(data.alertMsg.replace('{n}', unansweredList.length));
            const firstUnanswered = document.getElementById(`q-row-${unansweredList[0]}`);
            firstUnanswered.scrollIntoView({ behavior: 'smooth', block: 'center' });
            return;
        }

        showResult(totalScore);
    };

    function showResult(score) {
        const data = langData[currentLang];
        const resultArea = document.getElementById('result-area');
        let html = "";
        let resData = data.result;

        if (score >= 46) {
            resultArea.className = "result-danger";
            html = `
                <h2>${resData.highTitle}</h2>
                <div class="score-display">${score}${data.scoreUnit} <span style="font-size:0.5em; font-weight:normal; color:#666">/ 100${data.scoreUnit}</span></div>
                <hr style="border:0; border-top:1px solid #fc8181; margin: 20px 0; opacity:0.5">
                <p style="text-align: left; font-size: 0.95em; line-height:1.7;">
                    ${resData.highDesc}
                </p>
            `;
        } else if (score >= 36) {
            resultArea.className = "result-warning";
            html = `
                <h2>${resData.borderTitle}</h2>
                <div class="score-display">${score}${data.scoreUnit} <span style="font-size:0.5em; font-weight:normal; color:#666">/ 100${data.scoreUnit}</span></div>
                <hr style="border:0; border-top:1px solid #f6e05e; margin: 20px 0; opacity:0.5">
                <p style="text-align: left; font-size: 0.95em; line-height:1.7;">
                    ${resData.borderDesc}
                </p>
            `;
        } else {
            resultArea.className = "result-safe";
            html = `
                <h2>${resData.lowTitle}</h2>
                <div class="score-display">${score}${data.scoreUnit} <span style="font-size:0.5em; font-weight:normal; color:#666">/ 100${data.scoreUnit}</span></div>
                <hr style="border:0; border-top:1px solid #68d391; margin: 20px 0; opacity:0.5">
                <p style="text-align: left; font-size: 0.95em; line-height:1.7;">
                    ${resData.lowDesc}
                </p>
            `;
        }

        resultArea.innerHTML = html;
        resultArea.style.display = 'block';
        
        setTimeout(() => {
            resultArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
    }

    // 초기 실행
    setLanguage('ko');

</script>

</body>
</html>